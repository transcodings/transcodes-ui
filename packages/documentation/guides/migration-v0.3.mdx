---
title: 'v0.3 마이그레이션 가이드'
description: 'v0.2에서 v0.3으로 업그레이드하기'
---

이 가이드는 Transcodes UI v0.2에서 v0.3으로 업그레이드하는 방법을 설명합니다.

## 개요

v0.3은 **패키지 구조 개선**과 **새로운 컴포넌트 추가**에 중점을 두었습니다.

### 주요 변경사항

- **Breaking Changes**: `design-tokens` import 경로 변경
- **신규 컴포넌트**: `tc-error-message`, `tc-input-with-chip`
- **개선**: 스크린 컴포넌트 `min-height` 동작 개선
- **수정**: TypeScript 타입 정의 파일 포함

## Breaking Changes

### 1. design-tokens Import 경로 변경

<Steps>
  <Step title="v0.2 방식 (deprecated)">
    ```typescript
    // ❌ 더 이상 작동하지 않음
    import '@transcodes/design-tokens';
    ```
  </Step>

  <Step title="v0.3 방식 (신규)">
    ```typescript
    // ✅ v0.3+에서 사용
    import '@transcodes/design-tokens/css';
    ```
  </Step>
</Steps>

### 적용 방법

프로젝트의 모든 `main.ts`, `main.js`, `index.ts` 파일을 검색하여 import 경로를 업데이트하세요:

<Tabs>
  <Tab title="Vite">
    ```typescript
    // src/main.ts
    - import '@transcodes/design-tokens';
    + import '@transcodes/design-tokens/css';
    import '@transcodes/ui-components';
    ```
  </Tab>

  <Tab title="Next.js">
    ```typescript
    // app/layout.tsx
    - import '@transcodes/design-tokens';
    + import '@transcodes/design-tokens/css';
    import '@transcodes/ui-components';
    ```
  </Tab>

  <Tab title="Angular">
    ```typescript
    // main.ts
    import { bootstrapApplication } from '@angular/platform-browser';
    - import '@transcodes/design-tokens';
    + import '@transcodes/design-tokens/css';
    import '@transcodes/ui-components';

    bootstrapApplication(AppComponent);
    ```
  </Tab>
</Tabs>

### 2. 스크린 컴포넌트 min-height 변경

스크린 컴포넌트의 `min-height` 속성이 변경되었습니다:

**v0.2:**
```css
:host {
  display: flex;
  min-height: 100vh; /* 또는 100dvh */
}
```

**v0.3:**
```css
:host {
  display: flex;
  min-height: inherit; /* 부모 컨테이너 크기에 맞춤 */
}
```

이 변경은 다음과 같은 이점을 제공합니다:
- 부모 컨테이너 높이에 유연하게 대응
- 전체 화면 레이아웃이 아닌 부분 레이아웃에서도 사용 가능
- 더 나은 반응형 디자인 지원

### 적용 방법

만약 이전 동작(항상 100vh)이 필요한 경우, CSS로 오버라이드하세요:

```css
tc-loading-screen {
  min-height: 100vh;
}

tc-error-screen {
  min-height: 100dvh;
}
```

## 신규 컴포넌트

### 1. tc-error-message

폼 검증 에러와 경고 메시지를 표시하는 전용 컴포넌트입니다.

**Properties:**

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `variant` | `'error' \| 'warning' \| 'info'` | `'error'` | 메시지 타입 |
| `message` | `string` | `''` | 표시할 메시지 |

**사용 예시:**

```typescript
import '@transcodes/ui-components/primitives/tc-error-message.js';

// 에러 메시지
<tc-error-message
  variant="error"
  message="이메일이 유효하지 않습니다"
></tc-error-message>

// 경고 메시지
<tc-error-message
  variant="warning"
  message="이 작업은 되돌릴 수 없습니다"
></tc-error-message>

// 정보 메시지
<tc-error-message
  variant="info"
  message="계정 설정이 업데이트되었습니다"
></tc-error-message>
```

### 2. tc-input-with-chip

칩 인디케이터가 있는 입력 필드입니다. 주로 선택된 아이템을 시각적으로 표시합니다.

**Properties:**

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `label` | `string` | `''` | 입력 필드 라벨 |
| `value` | `string` | `''` | 현재 입력값 |
| `chips` | `string[]` | `[]` | 선택된 칩 목록 |

**사용 예시:**

```typescript
import '@transcodes/ui-components/primitives/tc-input-with-chip.js';

@customElement('tag-input')
export class TagInput extends LitElement {
  @state() chips: string[] = ['React', 'TypeScript'];
  @state() currentInput = '';

  render() {
    return html`
      <tc-input-with-chip
        label="기술 스택"
        value=${this.currentInput}
        chips=${JSON.stringify(this.chips)}
        @tc-input=${(e: any) => {
          this.currentInput = e.target.value;
        }}
      ></tc-input-with-chip>
    `;
  }
}
```

## 업그레이드 체크리스트

<Steps>
  <Step title="패키지 업그레이드">
    ```bash
    npm install @transcodes/ui-components@^0.3.0 @transcodes/design-tokens@^0.3.0
    ```
  </Step>

  <Step title="import 경로 업데이트">
    ```bash
    # 프로젝트에서 design-tokens import 찾기
    grep -r "import '@transcodes/design-tokens'" src/

    # 결과를 다음과 같이 변경
    # '@transcodes/design-tokens' → '@transcodes/design-tokens/css'
    ```
  </Step>

  <Step title="타입 정의 확인">
    v0.3에서는 모든 컴포넌트의 `.d.ts` 파일이 포함됩니다.
    TypeScript IntelliSense가 제대로 작동하는지 확인하세요:

    ```typescript
    import '@transcodes/ui-components/primitives/tc-button.js';

    // 타입 힌트가 자동으로 표시되어야 합니다
    const button: TcButton = document.querySelector('tc-button');
    ```
  </Step>

  <Step title="스크린 컴포넌트 높이 확인">
    스크린 컴포넌트가 포함된 페이지를 확인하세요.
    필요한 경우 CSS를 추가하세요:

    ```css
    tc-loading-screen,
    tc-error-screen,
    tc-success-screen {
      min-height: 100vh;
    }
    ```
  </Step>

  <Step title="신규 컴포넌트 활용">
    필요에 따라 새로운 컴포넌트를 프로젝트에 통합하세요:

    - 폼 검증이 필요한 경우 `tc-error-message` 사용
    - 태그/칩 선택이 필요한 경우 `tc-input-with-chip` 사용
    - 인증기 관리 페이지가 있는 경우 `tc-authenticator-card` 사용
  </Step>

  <Step title="테스트 및 배포">
    ```bash
    # 타입 체크
    tsc --noEmit

    # 빌드
    npm run build

    # 테스트 (있는 경우)
    npm test
    ```
  </Step>
</Steps>

## 주요 개선사항

### 더 나은 Tree-shaking

v0.3에서는 `sideEffects` 설정이 올바르게 구성되어 있어 번들 크기를 더 효과적으로 줄일 수 있습니다:

**번들 크기 비교:**

| 방식 | v0.2 | v0.3 | 개선율 |
|------|------|------|--------|
| 전체 import | 82KB | 80KB | 2.4% |
| 개별 import | 5.2KB | 4.1KB | 21% |

개별 import를 사용하면 번들 크기를 **95% 이상** 줄일 수 있습니다.

### 완전한 TypeScript 지원

v0.3은 모든 컴포넌트의 타입 정의를 포함합니다:

```typescript
// v0.2: 타입 정의 없음 (any 타입)
const button = document.querySelector('tc-button');
// button: Element

// v0.3: 완전한 타입 지원
const button = document.querySelector('tc-button');
// button: TcButton | null

// 속성 타입 체크
button?.setAttribute('variant', 'invalid'); // 에러: 타입 불일치
button?.setAttribute('variant', 'primary'); // 좋음: 올바른 타입
```

## 마이그레이션 후 확인사항

### 1. 개발 서버 재시작

캐시 문제를 피하기 위해 개발 서버를 재시작하세요:

```bash
npm run dev
# 또는
bun run dev
```

### 2. 브라우저 캐시 삭제

필요한 경우 브라우저 개발자 도구에서 캐시를 삭제하세요:
- DevTools → Application → Cache Storage → 캐시 삭제
- 또는 DevTools → Network → "Disable cache" 체크

### 3. 번들 크기 확인

빌드 후 번들 크기가 예상대로 감소했는지 확인하세요:

```bash
npm run build

# 번들 크기 분석 (webpack-bundle-analyzer 설치 후)
webpack-bundle-analyzer dist/stats.json
```

## 도움말

문제가 발생하면:

1. **[GitHub Issues](https://github.com/transcodings/transcodes-ui/issues)** - 버그 보고
2. **[Discussions](https://github.com/transcodings/transcodes-ui/discussions)** - 질문하기
3. **[Storybook](https://transcodes-ui-ui-components.vercel.app)** - 컴포넌트 데모 확인

## 다음 단계

<CardGroup cols={2}>
  <Card title="시작하기" icon="rocket" href="/guides/getting-started">
    업그레이드된 UI로 첫 프로젝트 만들기
  </Card>
  <Card title="신규 컴포넌트" icon="sparkles" href="/primitives/overview">
    새로운 컴포넌트 탐색
  </Card>
  <Card title="Storybook" icon="palette" href="https://transcodes-ui-ui-components.vercel.app">
    대화형 컴포넌트 데모
  </Card>
</CardGroup>

## v0.3 변경사항 전체 목록

### Added (추가)

- **tc-error-message**: 에러/경고/정보 메시지 컴포넌트
- **tc-input-with-chip**: 칩 인디케이터가 있는 입력 필드
- **tc-authenticator-card**: 인증기 정보 카드
- 누락된 primitives 스토리 (tc-item, tc-item-button, tc-symbol, tc-toast)
- 스크린 컴포넌트 FlexibleHeight 스토리

### Changed (변경)

- **design-tokens import 경로**: `@transcodes/design-tokens` → `@transcodes/design-tokens/css`
- **스크린 컴포넌트 min-height**: `100vh/100dvh` → `inherit`
- **Stories 폴더 구조**: primitives, screens, controllers로 분리

### Fixed (수정)

- TypeScript 타입 정의 파일(.d.ts) 누락 문제
- `sideEffects` 설정으로 웹 컴포넌트 등록 문제
- Vite 빌드 설정 (multiple entries)
- Vercel 배포 public/ 폴더 구조

<Warning>
v0.2에서 v0.3으로 업그레이드할 때 **반드시 design-tokens import 경로를 변경**해야 합니다.
변경하지 않으면 CSS 변수가 로드되지 않아 컴포넌트 스타일이 깨질 수 있습니다.
</Warning>
